<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>[DCN]æµ…è°ˆæ— çº¿VLANçš„è®¾ç½® | Hooyu&#39;s Note</title>
<meta name="description" content="ğŸ—»æç¯ç…§èƒ†çœ‹æ±Ÿå±±" />
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico?v=1621181121520">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">

<link rel="stylesheet" href="http://localhost:4000/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="[DCN]æµ…è°ˆæ— çº¿VLANçš„è®¾ç½® | Hooyu&#39;s Note - Atom Feed" href="http://localhost:4000/atom.xml">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



  </head>
  <body>
    <div class="site-nav no-cover">
      <div class="head">
  <div class="inner">
    <a class="site-name" href="http://localhost:4000">
        <span>Hooyu&#39;s Note</span>
    </a>
    <label class="burger" for="burger"></label>
    <input id="burger" type="checkbox">
    <button class="burger">
      <div>
        <span></span>
        <span></span>
      </div>
    </button>
    <nav class="info_nav">
      
        
          <a href="/">é¦–é¡µ</a>
        
      
        
          <a href="/archives">å½’æ¡£</a>
        
      
        
          <a href="/tags">æ ‡ç­¾</a>
        
      
        
          <a href="/post/about">å…³äº</a>
        
      
        
          <a href="https://www.notion.so/ikozn/BookList-3cfeb2523e8b49f18da9e425b5502984" target="_blank">ä¹¦å•</a>
        
      
    </nav>
  </div>
</div>
    </div>
    <article role="main" class="hentry ">
      
      <h1 class="entry-title" itemprop="headline">[DCN]æµ…è°ˆæ— çº¿VLANçš„è®¾ç½®</h1>
      <div class="entry-meta">
        <time class="updated" datetime="2018-03-12 15:22:14">2018-03-12</time>
        <span class="author vcard">
          14 min read
        </span>
      </div>
      <div class="post-content yue">
        <!--more-->
<p>é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªå¸¸è§çš„é”™è¯¯é…ç½®æ–¹å¼</p>
<h3 id="æ‹“æ‰‘"><strong>æ‹“æ‰‘</strong></h3>
<figure data-type="image" tabindex="1"><img src="https://i.loli.net/2018/03/12/5aa600e2bb5a2.png" alt="æ‹“æ‰‘" loading="lazy"></figure>
<br />
<br />
<h3 id="éœ€æ±‚"><strong>éœ€æ±‚</strong></h3>
<p>1.ç½‘ç»œæ‹“æ‰‘å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒACæ˜¯æ— çº¿æ§åˆ¶å™¨ï¼Œå…¶E1/0/1å£è¿æ¥ç€APçš„LAN1å£</p>
<p>2.æŒ‰ç…§ è¡¨1-1 å®Œæˆæ— çº¿ç½‘ç»œçš„é…ç½®.ä½¿ç”¨æˆ·è¿æ¥WLANä½¿èƒ½å¤Ÿè·å–å¯¹åº”VLANçš„IPåœ°å€ã€‚APåœ°å€é€šè¿‡DHCPä¸‹å‘ï¼Œä¸º192.168.3.10ã€‚</p>
<table>
<thead>
<tr>
<th>VLAN</th>
<th>SVIæ¥å£åœ°å€</th>
<th>è¯´æ˜</th>
<th>å¯¹åº”SSID</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td>192.168.1.254/24</td>
<td>ç”¨æˆ·VLAN</td>
<td>VLAN1-Wireless-LAB</td>
</tr>
<tr>
<td>2</td>
<td>192.168.2.254/24</td>
<td>ç”¨æˆ·VLAN</td>
<td>VLAN2-Wireless-LAB</td>
</tr>
<tr>
<td>3</td>
<td>192.168.3.254/24</td>
<td>ç®¡ç† and ç”¨æˆ·VLAN</td>
<td>VLAN3-Wireless-LAB</td>
</tr>
</tbody>
</table>
<center>è¡¨1-1</center>
<h3 id="é…ç½®åŠå®ç°"><strong>é…ç½®åŠå®ç°</strong></h3>
<h4 id="1apä¸Šçº¿">1.APä¸Šçº¿</h4>
<br />
<h4 id="åˆ’åˆ†vlanå’Œè®¾ç½®sviæ¥å£åœ°å€">åˆ’åˆ†VLANå’Œè®¾ç½®SVIæ¥å£åœ°å€</h4>
<pre><code>AC(config)#vlan 2		//åˆ›å»ºVLAN2
AC(config-vlan2)#vlan 3		//åˆ›å»ºVLAN3
AC(config-vlan3)#int vlan 1 	//è¿›å…¥Vlan1çš„SVIæ¥å£
AC(config-if-vlan1)#ip ad 192.168.1.254 255.255.255.0		//è®¾ç½®IPåœ°å€	
AC(config-if-vlan1)#int vlan 2		//è¿›å…¥VLAN2çš„SVIæ¥å£
AC(config-if-vlan2)#ip ad 192.168.2.254 255.255.255.0		//è®¾ç½®IPåœ°å€
AC(config-if-vlan2)#int vlan 3		//è¿›å…¥VLAN3çš„SVIæ¥å£
AC(config-if-vlan3)#ip ad 192.168.3.254 255.255.255.0		//è®¾ç½®IPåœ°å€
AC(config-if-ethernet1/0/1)#sw mo trunk 		//æ›´æ”¹æ¥å£æ¨¡å¼ä¸ºTrunk
AC(config-if-vlan3)#int e1/0/1
AC(config-if-ethernet1/0/1)#sw mo trunk 
AC(config-if-ethernet1/0/1)#switchport trunk native vlan 3		//è®¾ç½®Native VLANä¸ºVLAN3
</code></pre>
<br />
<br />
<h4 id="2-å¼€å¯dhcpåŠŸèƒ½è‡ªåŠ¨ä¸‹å‘åœ°å€">2 å¼€å¯DHCPåŠŸèƒ½ï¼Œè‡ªåŠ¨ä¸‹å‘åœ°å€ã€‚</h4>
<pre><code>AC(config)#ip dhcp pool vlan1 		//åˆ›å»ºåœ°å€æ± 
AC(dhcp-vlan1-config)#network-address 192.168.1.0 255.255.255.0		//è®¾ç½®ä¸‹å‘ç½‘æ®µ
AC(dhcp-vlan1-config)#default-router 192.168.1.254		
AC(dhcp-vlan1-config)#!
AC(config)#ip dhcp pool vlan2		//åˆ›å»ºåœ°å€æ± 
AC(dhcp-vlan2-config)#network-address 192.168.2.0 255.255.255.0		//è®¾ç½®ä¸‹å‘ç½‘æ®µ
AC(dhcp-vlan2-config)#default-router 192.168.2.254 		//è®¾ç½®ç½‘å…³
AC(dhcp-vlan2-config)#!
AC(config)#ip dhcp pool vlan3       //åˆ›å»ºåœ°å€æ±                 
AC(dhcp-vlan3-config)#network-address 192.168.3.0 255.255.255.0		//è®¾ç½®ä¸‹å‘ç½‘æ®µ
AC(dhcp-vlan3-config)#default-router 192.168.3.254		//è®¾ç½®ç½‘å…³
AC(dhcp-vlan3-config)#!
AC(config)#service dhcp		//å¼€å¯DHCPæœåŠ¡
</code></pre>
<br />
<br />
<h4 id="3-dhcpé™æ€ç»‘å®šapåœ°å€">3 DHCPé™æ€ç»‘å®šAPåœ°å€</h4>
<p><strong>AC</strong></p>
<pre><code>AC(config)#show ip dh binding 		//æŸ¥çœ‹DHCPç»‘å®š
Total dhcp binding items: 1, the matched: 1
IP address          Hardware address         Lease expiration         Type
192.168.3.1         00-03-0F-5B-F0-E0        Mon Jan 02 00:30:00 2006 Dynamic

AC(config)#ip dhcp pool AP		//æ·»åŠ DHCPæ± 
AC(dhcp-ap-config)#hardware-address 00-03-0F-5B-F0-E0		//ç»‘å®šMACåœ°å€
AC(dhcp-ap-config)#host 192.168.3.10		//ç»‘å®šIP
AC(dhcp-ap-config)#default-router 192.168.3.254		//è®¾ç½®ç½‘å…³
AC(dhcp-ap-config)#!
AC(config)#show ip dh binding                
Total dhcp binding items: 1, the matched: 1
IP address          Hardware address         Lease expiration         Type
192.168.3.10        00-03-0F-5B-F0-E0        Infinite                 Manual
</code></pre>
<br />
<br />
<p><strong>AP</strong></p>
<p>é‡å¯çš„DHCPåŠŸèƒ½</p>
<pre><code>AP# set management dhcp-status down	//å…³é—­DHCPè·å–åœ°å€
AP# set management dhcp-status up  	//å¼€å¯DHCPè·å–åœ°å€
AP# get management 
Property                   Value
--------------------------------------------
vlan-id                    1
interface                  brvlan1
static-ip                  192.168.1.10
static-mask                255.255.255.0
ip                         192.168.3.10		//è·å–åˆ°äº†192.168.3.10
mask                       255.255.255.0
ipv6                       
ipv6-prefix-length         0
mac                        00:03:0F:5B:F0:E0
dhcp-status                up
dhcpv6-status              down
ipv6-status                up
ipv6-autoconfig-status     up
static-ipv6                
static-ipv6-prefix-length  0
</code></pre>
<br />
<br />
<h4 id="4-å¼€å¯acæ— çº¿åŠŸèƒ½">4 å¼€å¯ACæ— çº¿åŠŸèƒ½</h4>
<pre><code>AC(config-wireless)#no auto-ip-assign 		//å…³é—­æ— çº¿åœ°å€é€‰ä¸¾
AC(config-wireless)#static-ip 192.168.3.254		//è®¾ç½®é™æ€æ— çº¿åœ°å€
AC(config-wireless)#discovery vlan-list 3		//è®¾ç½®äºŒå±‚å‘ç°VLAN
AC(config-wireless)#ap authentication none 		//å…³é—­APéªŒè¯
AC(config-wireless)#enable 		//å¼€å¯æ— çº¿åŠŸèƒ½
æŸ¥çœ‹APçŠ¶æ€
AC(config)#show wir ap status 

    MAC Address                                                            Configuration                
 (*) Peer Managed  IP Address                              Profile Status     Status           Age      
------------------ --------------------------------------- ------- ------- ------------- --------------
 00-03-0f-5b-f0-e0 192.168.3.10                            1       Managed Failure       0d:00:00:07

Total Access Points............................ 1
</code></pre>
<br />
<br />
<h4 id="5-æ— çº¿é…ç½®">5 æ— çº¿é…ç½®</h4>
<pre><code>AC(config)#wireless 		//è¿›å…¥æ— çº¿å…¨å±€æ¨¡å¼
AC(config-wireless)#network 1		//è¿›å…¥networké…ç½®æ¨¡å¼
AC(config-network)#ssid VLAN1-Wireless-LAB		//è®¾ç½®SSID
AC(config-network)#security mode none 	//å…³é—­ç”¨æˆ·è®¤è¯
AC(config-network)#vlan 1		//è®¾ç½®VLAN
AC(config-network)#network 2		//è¿›å…¥networké…ç½®æ¨¡å¼
AC(config-network)#ssid VLAN2-Wireless-LAB
AC(config-network)#security mode none 		//å…³é—­ç”¨æˆ·è®¤è¯
AC(config-network)#vlan 2		//è®¾ç½®VLAN
AC(config-network)#network 3		//è¿›å…¥networké…ç½®æ¨¡å¼
AC(config-network)#ssid VLAN3-Wireless-LAB
AC(config-network)#security mode none 		//å…³é—­ç”¨æˆ·è®¤è¯
AC(config-network)#vlan 3		//è®¾ç½®VLAN
AC(config-network)#!
AC(config-wireless)#ap profile 1		//è¿›å…¥profile 1
AC(config-ap-profile)#hwtype 29		//è®¾ç½®ç¡¬ä»¶å·
AC(config-ap-profile)#radio 1		//è¿›å…¥radioé…ç½®æ¨¡å¼
AC(config-ap-profile-radio)#vap 1		//è¿›å…¥vapé…ç½®æ¨¡å¼
AC(config-ap-profile-vap)#enable 		//å¼€å¯vap
AC(config-ap-profile-vap)#vap 2		//è¿›å…¥VAPé…ç½®æ¨¡å¼
AC(config-ap-profile-vap)#enable 	//å¼€å¯VAP
AC(config-ap-profile-vap)#!
AC(config-ap-profile-radio)#!
AC(config-ap-profile)#!
AC(config-wireless)#!
AC(config)#!
AC(config)#exit
AC#wir ap prof ap 1		//ä¸‹å‘é…ç½®æ–‡ä»¶
All configurations will be send to the aps associated to this profile and associated clients on these aps will be disconnected. Are you sure you want to apply the profile configuration? [Y/N] y
</code></pre>
<hr>
<h4 id="6æµ‹è¯•">6.æµ‹è¯•</h4>
<p>é…ç½®æ–‡ä»¶ä¸‹å‘ä¹‹åï¼Œç¨ç­‰ä¸€ä¼šï¼Œå°±å¯ä»¥æœç´¢åˆ°æ— çº¿ä¿¡å·äº†ã€‚</p>
<figure data-type="image" tabindex="2"><img src="https://i.loli.net/2018/03/12/5aa57b1fe9738.png" alt="WIFIåˆ—è¡¨" loading="lazy"></figure>
<p>æ¥ç€æˆ‘ä»¬è¿ä¸Šå»è¯•è¯•</p>
<p>é¦–å…ˆæˆ‘ä»¬è¿æ¥VLAN1çš„</p>
<p>ç»“æœå‘ç°</p>
<figure data-type="image" tabindex="3"><img src="https://i.loli.net/2018/03/12/5aa57c1f5f96d.png" alt="VLAN1è¿æ¥" loading="lazy"></figure>
<center>ç«Ÿç„¶è·å–åˆ°äº†VLAN3çš„åœ°å€</center>
<br />
<center>æ¥ä¸‹æ¥æˆ‘ä»¬å†è¿æ¥VLAN2çš„è¯•è¯•</center>
<figure data-type="image" tabindex="4"><img src="https://i.loli.net/2018/03/12/5aa57c1f5f96d.png" alt="VLAN2è¿æ¥" loading="lazy"></figure>
<center>å‘ç°æ˜¯æ­£å¸¸çš„</center>
<br />
<center>æœ€åå†æ¥è¿æ¥VLAN3</center>
<figure data-type="image" tabindex="5"><img src="https://i.loli.net/2018/03/12/5aa58ea17ceb9.png" alt="VLAN3è¿æ¥" loading="lazy"></figure>
<center>å‘ç°æ ¹æœ¬è·å–ä¸åˆ°IPåœ°å€</center>
<h3 id="é—®é¢˜åˆ†æ">é—®é¢˜åˆ†æ</h3>
<h4 id="1æ‹“æ‰‘">1.æ‹“æ‰‘</h4>
<figure data-type="image" tabindex="6"><img src="https://i.loli.net/2018/03/12/5aa600e2bb5a2.png" alt="æ‹“æ‰‘" loading="lazy"></figure>
<br />
<br />
<h4 id="2vlan-1-ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹">2.VLAN 1 ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹</h4>
<figure data-type="image" tabindex="7"><img src="https://i.loli.net/2018/03/12/5aa600abe2514.png" alt="VLAN DHCPè¿‡ç¨‹" loading="lazy"></figure>
<p>**(1).**å½“ç”¨æˆ·è¿æ¥åˆ°æ— çº¿ç½‘ç»œä¹‹åï¼Œå®¢æˆ·ç«¯å‘é€<code>DHCP DISCOVER</code>å¹¿æ’­åŒ…æ¥è¯·æ±‚IPåœ°å€</p>
<p>**(2).**APé»˜è®¤çš„è½¬å‘æ–¹å¼ä¸ºæœ¬åœ°è½¬å‘ï¼Œæ‰€ä»¥<code>DHCP DISCOVER</code>æŠ¥æ–‡åˆ°è¾¾APä¹‹å802.11å¸§ä¾¿è¢«è½¬æ¢æˆä»¥å¤ªç½‘å¸§ã€‚ä¸æ‰“VLAN TAGï¼Œå°†æ•°æ®åŒ…è½¬å‘ç»™äº¤æ¢æœºã€‚</p>
<p>**(3).**æˆ‘ä»¬åœ¨äº¤æ¢æœºçš„E1/0/1æ¥å£ä¸Šé…ç½®äº†å‘½ä»¤ <code>switchport trunk native vlan 3</code>,æ‰€ä»¥å½“æ²¡æœ‰VLAN Tagçš„å¸§åˆ°è¾¾äº¤æ¢æœºçš„æ—¶å€™ï¼Œè¢«æ‰“ä¸ŠVLAN 3çš„æ ‡ç­¾.</p>
<p>**(4).**æ‰€ä»¥æœ€åå¯¼è‡´äº†Clientè·å–åˆ°äº†VLAN3ç½‘æ®µçš„åœ°å€</p>
<blockquote>
<p>VLAN1çš„æ•°æ®APä¸æ‰“æ ‡ç­¾</p>
</blockquote>
<br />
<br />
<h4 id="3vlan-2-ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹">3.VLAN 2 ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹</h4>
<figure data-type="image" tabindex="8"><img src="https://i.loli.net/2018/03/12/5aa601ee7c5d5.png" alt="VLAN2ä¸Šçº¿" loading="lazy"></figure>
<p>**(1).**å½“ç”¨æˆ·è¿æ¥åˆ°æ— çº¿ç½‘ç»œä¹‹åï¼Œå®¢æˆ·ç«¯å‘é€<code>DHCP DISCOVER</code>å¹¿æ’­åŒ…æ¥è¯·æ±‚IPåœ°å€</p>
<p>**(2).**APé»˜è®¤çš„è½¬å‘æ–¹å¼ä¸ºæœ¬åœ°è½¬å‘ï¼Œæ‰€ä»¥<code>DHCP DISCOVER</code>æŠ¥æ–‡åˆ°è¾¾APä¹‹å802.11å¸§ä¾¿è¢«è½¬æ¢æˆä»¥å¤ªç½‘å¸§ã€‚</p>
<p>æ‰“ä¸Š<code>VLAN 2</code> TAGï¼Œå°†æ•°æ®åŒ…è½¬å‘ç»™äº¤æ¢æœºã€‚</p>
<p>**(3).**äº¤æ¢æœºæ”¶åˆ°è¯¥å¸§ï¼Œä¸å¯¹å¸§è¿›è¡Œä»»ä½•å¤„ç†ï¼Œç›´æ¥æ”¾è¡Œï¼Œæœ€åå¸§åœ¨VLAN2å†…ä¼ æ’­ã€‚</p>
<p>**(4).**æ‰€ä»¥å®¢æˆ·æœºå¯ä»¥è·å–åˆ°æ­£ç¡®çš„åœ°å€ã€‚</p>
<br />
<br />
<h4 id="4vlan-3-ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹">4.VLAN 3 ç”¨æˆ·ä¸Šçº¿è¿‡ç¨‹</h4>
<figure data-type="image" tabindex="9"><img src="https://i.loli.net/2018/03/12/5aa60313a8a84.png" alt="VLAN3ä¸Šçº¿" loading="lazy"></figure>
<p>**(1).**å½“ç”¨æˆ·è¿æ¥åˆ°æ— çº¿ç½‘ç»œä¹‹åï¼Œå®¢æˆ·ç«¯å‘é€<code>DHCP DISCOVER</code>å¹¿æ’­åŒ…æ¥è¯·æ±‚IPåœ°å€</p>
<p>**(2).**APé»˜è®¤çš„è½¬å‘æ–¹å¼ä¸ºæœ¬åœ°è½¬å‘ï¼Œæ‰€ä»¥<code>DHCP DISCOVER</code>æŠ¥æ–‡åˆ°è¾¾APä¹‹å802.11å¸§ä¾¿è¢«è½¬æ¢æˆä»¥å¤ªç½‘å¸§ã€‚</p>
<p>**(3).**æ‰“ä¸Š<code>VLAN 3</code> TAGï¼Œå°†æ•°æ®åŒ…è½¬å‘ç»™äº¤æ¢æœºï¼Œç„¶è€Œäº¤æ¢æœºä¸Šé…ç½®äº†<code>switchport trunk native vlan 3</code>ï¼Œå¯¼è‡´äº¤æ¢æœºä¸¢åŒ…ï¼Œè¯¥SSIDä¸‹æ‰€æœ‰æ•°æ®éƒ½ä¸èƒ½é€šè¿‡äº¤æ¢æœºï¼Œæ‰€ä»¥æœ€ç»ˆä¹Ÿä¸èƒ½è·å–åœ°å€ã€‚</p>
<br />
<br />
<hr>
<h3 id="è§£å†³é—®é¢˜">è§£å†³é—®é¢˜</h3>
<p>è®©æˆ‘ä»¬é‡æ–°åšä¸€é</p>
<h4 id="1è®¾ç½®vlan">1.è®¾ç½®VLAN</h4>
<pre><code>AC(config)#vlan 2		//åˆ›å»ºVLAN2
AC(config-vlan2)#vlan 3		//åˆ›å»ºVLAN3
AC(config-vlan3)#int vlan 1 	//è¿›å…¥Vlan1çš„SVIæ¥å£
AC(config-if-vlan1)#ip ad 192.168.1.254 255.255.255.0		//è®¾ç½®IPåœ°å€	
AC(config-if-vlan1)#int vlan 2		//è¿›å…¥VLAN2çš„SVIæ¥å£
AC(config-if-vlan2)#ip ad 192.168.2.254 255.255.255.0		//è®¾ç½®IPåœ°å€
AC(config-if-vlan2)#int vlan 3		//è¿›å…¥VLAN3çš„SVIæ¥å£
AC(config-if-vlan3)#ip ad 192.168.3.254 255.255.255.0		//è®¾ç½®IPåœ°å€
AC(config-if-vlan3)#int e1/0/1
AC(config-if-ethernet1/0/1)#sw mo trunk 		//æ›´æ”¹æ¥å£æ¨¡å¼ä¸ºTrunk
</code></pre>
<p><strong>æ³¨æ„ï¼Œè¿™é‡Œä¸è®¾ç½®Native VLAN</strong></p>
<br />
<br />
<h4 id="2è®¾ç½®dhcp">2.è®¾ç½®DHCP</h4>
<p><strong>AP</strong></p>
<p>è®¾ç½®ç®¡ç†VLAN</p>
<pre><code>AP# set management vlan-id 3	//è®¾ç½®ç®¡ç†VLANä¸ºVLAN3
</code></pre>
<blockquote>
<p>è®¾ç½®ç®¡ç†VLANä¹‹åï¼Œä»APå‘å‡ºçš„ç®¡ç†/æ§åˆ¶æŠ¥æ–‡éƒ½ä¼šæ‰“ä¸ŠVLAN 3çš„TAGï¼Œä¹Ÿå¯ä»¥æ¥å—å¸¦VLAN3 TAGçš„ç®¡ç†æŠ¥æ–‡ã€‚</p>
</blockquote>
<br />
<br />
<p><strong>AC</strong></p>
<pre><code>AC(config)#ip dh pool VLAN1
AC(dhcp-vlan1-config)#network-address 192.168.1.0 255.255.255.0
AC(dhcp-vlan1-config)#default-router 192.168.1.254
AC(dhcp-vlan1-config)#!                    
AC(config)#ip dh pool VLAN2
AC(dhcp-vlan2-config)#network-address 192.168.2.0 255.255.255.0
AC(dhcp-vlan2-config)#default-router 192.168.2.254
AC(dhcp-vlan2-config)#!
AC(config)#ip dh pool VLAN3
AC(dhcp-vlan3-config)#network-address 192.168.3.0 255.255.255.0
AC(dhcp-vlan3-config)#default-router 192.168.3.254
AC(dhcp-vlan3-config)#!
AC(config)#service dhcp
</code></pre>
<br />
<br />
<h4 id="3é™æ€ç»‘å®šdhcp">3.é™æ€ç»‘å®šDHCP</h4>
<p><strong>AC</strong></p>
<pre><code>AC(config)#show ip dh binding 
Total dhcp binding items: 1, the matched: 1
IP address          Hardware address         Lease expiration         Type
192.168.3.1         aa-aa-aa-aa-aa-aa        Mon Jan 02 00:12:00 2006 Dynamic
AC(config)#ip dhcp pool AP
AC(dhcp-ap-config)#hardware-address aa-aa-aa-aa-aa-aa
AC(dhcp-ap-config)#host 192.168.3.10
AC(dhcp-ap-config)#default-router 192.168.3.254
AC(dhcp-ap-config)#!
</code></pre>
<br />
<p><strong>AP</strong></p>
<pre><code>AP# set management dhcp-status down
AP# set management dhcp-status up  
</code></pre>
<br />
<br />
<h4 id="4å¼€å¯æ— çº¿åŠŸèƒ½">4.å¼€å¯æ— çº¿åŠŸèƒ½</h4>
<pre><code>AC(config-wireless)#no auto-ip-assign 
AC(config-wireless)#static-ip 192.168.3.254
AC(config-wireless)#ap authe none 
AC(config-wireless)#discovery vlan-list 3
AC(config-wireless)#enable 
</code></pre>
<br />
<br />
<h4 id="5é…ç½®æ— çº¿">5.é…ç½®æ— çº¿</h4>
<pre><code>AC(config-wireless)#network 1
AC(config-network)#ssid VLAN1-Wireless-LAB
AC(config-network)#vlan 1
AC(config-network)#network 2
AC(config-network)#ssid VLAN2-Wireless-LAB
AC(config-network)#vlan 2
AC(config-network)#network 3
AC(config-network)#ssid VLAN3-Wireless-LAB
AC(config-network)#vlan 3
AC(config-network)#!
AC(config-wireless)#ap profile 1
AC(config-ap-profile)#hwtype 29
AC(config-ap-profile)#management vlan 3
AC(config-ap-profile)#radio 1
AC(config-ap-profile-radio)#vap 1
AC(config-ap-profile-vap)#enable 
AC(config-ap-profile-vap)#vap 2
AC(config-ap-profile-vap)#enable 
AC(config-ap-profile-vap)#!
AC(config-ap-profile-radio)#!
AC(config-ap-profile)#!
AC#wireless ap prof ap 1
All configurations will be send to the aps associated to this profile and associated clients on these aps will be disconnected. Are you sure you want to apply the profile configuration? [Y/N] y
AP Profile apply is in progress.
</code></pre>
<br />
<br />
<h4 id="6æµ‹è¯•-2">6.æµ‹è¯•</h4>
<p><strong>VLAN1</strong></p>
<figure data-type="image" tabindex="10"><img src="https://i.loli.net/2018/03/12/5aa60f0615b3b.png" alt="VLAN1" loading="lazy"></figure>
<br />
<br />
<p><strong>VLAN2</strong></p>
<figure data-type="image" tabindex="11"><img src="https://i.loli.net/2018/03/12/5aa60f8f5b204.png" alt="VLAN2" loading="lazy"></figure>
<p><strong>VLAN3</strong></p>
<figure data-type="image" tabindex="12"><img src="https://i.loli.net/2018/03/12/5aa61045a552d.png" alt="VLAN3" loading="lazy"></figure>
<p>å¯ä»¥å‘ç°ï¼Œè¿™æ¬¡ä¸€åˆ‡éƒ½æ­£å¸¸äº†ã€‚</p>
<hr>
<h3 id="å¤±è¯¯å‘ç”Ÿçš„åŸå› ">å¤±è¯¯å‘ç”Ÿçš„åŸå› </h3>
<p>è¿™ä¸ªé…ç½®é”™è¯¯å‡ºç°çš„åŸå› ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ç‚¹:</p>
<p>**1.**å¯¹<code>network</code>é…ç½®æ¨¡å‹ä¸‹<code>vlan</code>çš„å‘½ä»¤æœ‰æ‰€è¯¯è§£</p>
<p>è¿™ä¸ªå‘½ä»¤æ˜¯è®¾ç½®VLANè¡¨ç¤ºï¼Œè®¾ç½®æ— çº¿ç”¨æˆ·çš„æ•°æ®åœ¨ç»è¿‡APä¹‹ååº”æ‰“ä¸Šçš„VLAN TAGï¼Œè€Œä¸æ˜¯è¯´è¿™ä¸ªæ— çº¿ä¿¡å·æ•°æ®æ˜¯å“ªä¸ªVLANï¼Œå°±è®¾ç½®æˆå“ªä¸ªVLANã€‚</p>
<br />
<br />
<p>**2.**æ— çº¿ç®¡ç†VLANçš„è®¾ç½®</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬è®¾ç½®ç®¡ç†VLANçš„æ—¶å€™éƒ½æ˜¯å°†æ¥å£è®¾ç½®ä¸ºTrunkï¼Œå¹¶æ›´æ”¹æ¥å£çš„æœ¬å¾VLAN.å¤§å¤šæ•°æƒ…å†µä¸‹è¿™æ ·å­æ˜¯æ²¡æœ‰é—®é¢˜çš„.ä½†æ˜¯å½“ç®¡ç†VLANå’Œç”¨æˆ·VLANæ˜¯åŒä¸€ä¸ªï¼Œå¹¶ä¸”ä¸æ˜¯VLAN1çš„æ—¶å€™ï¼Œæƒ…å†µå°±æœ‰äº›å°´å°¬.</p>
<p>å¦‚ä¸Šé¢çš„ç¬¬ä¸€ä¸ªå®éªŒï¼Œå½“ç®¡ç†å’Œç”¨æˆ·VLANéƒ½æ˜¯VLAN3çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯è¿™ä¹ˆè®¾ç½®çš„:</p>
<pre><code>AC(config-if-vlan3)#int e1/0/1
AC(config-if-ethernet1/0/1)#sw mo trunk 
AC(config-if-ethernet1/0/1)#switchport trunk native vlan 3		//è®¾ç½®Native VLANä¸ºVLAN3
</code></pre>
<p><em><strong>æ›´æ”¹æ¥å£çš„æœ¬å¾VLAN</strong></em></p>
<br />
<br />
<pre><code>AC(config-network)#network 3		//è¿›å…¥networké…ç½®æ¨¡å¼
AC(config-network)#ssid VLAN3-Wireless-LAB
AC(config-network)#security mode none 		//å…³é—­ç”¨æˆ·è®¤è¯
AC(config-network)#vlan 3		//è®¾ç½®VLAN
</code></pre>
<p><em><strong>åœ¨Networkä¸‹è®¾ç½®VLANæ ‡è¯†</strong></em></p>
<p>å¦‚æœè¿™ä¹ˆè®¾ç½®ï¼ŒAPè½¬å‘è¿æ¥åˆ°Network 3çš„ç”¨æˆ·æµé‡çš„æ—¶å€™ï¼Œå°±ä¼šæ‰“ä¸ŠVLAN 3çš„TAGå¹¶å‘é€å‡ºå»ï¼Œç„¶è€Œæˆ‘ä»¬çš„ACæ¥å£ä¹Ÿå°†æ¥å£çš„æœ¬å¾VLANä¿®æ”¹ä¸ºäº†VLAN3ã€‚ä¸€ä½†ACæ”¶åˆ°APå‘æ¥å¸¦æœ‰VLAN 3 TAGçš„æ•°æ®å¸§æ—¶ï¼Œå°±ä¼šå°†å¸§ä¸¢å¼ƒï¼Œè¿™å°±è¿™å°±å¯¼è‡´äº†æˆ‘ä»¬è¿ä¸Šäº†Network 3å´æ— æ³•è®¿é—®ç½‘ç»œ.</p>
<br />
<br />
<p>è§£å†³æ–¹æ³•æœ‰ä¸¤ç§</p>
<p>**1.**å°†networkä¸­çš„vlanæ ‡è¯†æ”¹å›vlan1</p>
<p>å¦‚æ­¤ï¼Œå½“APè½¬å‘Networkçš„æµé‡æ—¶ï¼Œå°±ä¸ä¼šæ‰“ä¸ŠVLAN TAGï¼ŒACæ¥æ”¶åˆ°æ•°æ®å¸§ä¹‹åï¼Œä¼šæ ¹æ®æœ¬å¾VLANæ‰“ä¸ŠVLAN TAGï¼Œç„¶ååœ¨ACä¸­è¿›è¡Œè½¬å‘ã€‚</p>
<p>æ­¤æ–¹æ³•çš„ä»£ä»·å°±æ˜¯VLAN1ä¸èƒ½ç”¨æ¥è½¬å‘æ— çº¿æµé‡(ä¸èƒ½å½“åšç”¨æˆ·VLAN).</p>
<br />
<p>**2.**è¯·çœ‹[è§£å†³é—®é¢˜]ç¯‡</p>
<h3 id="æ€»ç»“">æ€»ç»“</h3>
<p>å½“ä½ çš„ç®¡ç†VLANä¸ç”¨æˆ·VLANæ˜¯åŒä¸€ä¸ªVLANä¸”ä¸æ˜¯VLAN1çš„æ—¶å€™ï¼Œè¦ä¹ˆæ”¾å¼ƒä½¿ç”¨VLAN1è½¬å‘æ•°æ®ã€‚</p>
<p>è¦ä¹ˆåœ¨APä¸Šè®¾ç½®ç®¡ç†VLAN.</p>

      </div>
      <div class="entry-block">
        <div class="entry-tags">
          
            <a href="http://localhost:4000/tag/_Kz1iaYaah/">
              WLAN
            </a>
          
            <a href="http://localhost:4000/tag/V5g_FuAyr_/">
              æ— çº¿
            </a>
          
            <a href="http://localhost:4000/tag/rEkuMBNIjl/">
              ç¥å·æ•°ç 
            </a>
          
            <a href="http://localhost:4000/tag/SA6_Hsrefy/">
              DCN
            </a>
          
            <a href="http://localhost:4000/tag/j1B6RKT2qV/">
              é…ç½®
            </a>
          
        </div>
      </div>
    </article>
    
      <section class="post-section prev-post">
        <div class="inner">
          <h3>å‰ä¸€ç¯‡</h3>
          <a href="http://localhost:4000/post/æœ¬åšå®¢æœç´¢åä»£ä¸Šçº¿/">
            <strong>æœ¬åšå®¢æœç´¢åä»£ä¸Šçº¿</strong>
          </a>
        </div>
      </section>
    
    
      <section class="post-section prev-post">
        <div class="inner">
          <h3>åä¸€ç¯‡</h3>
          <a href="http://localhost:4000/post/æ— çº¿å¸¸ç”¨é…ç½®/">
            <strong>[DCN]ç¥å·æ•°ç æ— çº¿å¸¸ç”¨é…ç½®</strong>
          </a>
        </div>
      </section>
    

    
      
        <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>

<div id="gitalk-container"></div>

<script>

  var gitalk = new Gitalk({
    clientID: '0db2ec692e695c68b01b',
    clientSecret: '3db8da412bbe1c349309420810429c6121a95249',
    repo: 'blog-comments',
    owner: 'ikozn',
    admin: ['ikozn'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })

  gitalk.render('gitalk-container')

</script>

      

      
    

    <footer class="footer">
  <div class="main">
    <a href="http://localhost:4000">
      <img class="avatar" src="http://localhost:4000/images/avatar.png?v=1621181121520" alt="Hooyu&#39;s Note">
    </a>
    <div class="footer__social">
      
        
          <a href="https://github.com/ikozn" target="_blank"><i class="ri-github-line"></i></a>
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <p class="footer__sosumi">
      æ€•ä»€ä¹ˆçœŸç†æ— ç©·ï¼Œè¿›ä¸€å¯¸æœ‰ä¸€å¯¸çš„æ¬¢å–œ
    </p>
    <a class="footer-rss" href="http://localhost:4000/atom.xml">RSS</a>
  </div>
</footer>

<script src="http://localhost:4000/media/prism.js"></script>
<script>
  Prism.highlightAll()
</script>

  </body>
</html>
